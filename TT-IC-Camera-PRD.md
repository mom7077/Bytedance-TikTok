# TT-IC-Camera PRD（图片编辑 App，Android）

## 1. 背景与目标
- 背景：移动端日常分享/创作需要轻量、高效、流畅的图片编辑工具，覆盖相册选图、拍照、基础编辑、装饰、保存/分享。
- 业务目标：完成必做功能并流畅运行，满足基础编辑需求；在 3 分钟内可演示核心流程。
- 技术目标：掌握相册/相机接入、图像加载与处理、保存与权限处理、性能优化；Android 10+ 兼容。
- 成功标准：启动 ≤1s；导入/拍照到编辑 ≤1s；滤镜/调节预览响应 ≤0.5s；编辑 10 张无闪退；内存 ≤200MB；保存成功率 >99%，异常有明确提示。

## 2. 用户与场景
- 目标用户：普通内容发布者、社交分享用户、轻量创作者。
- 主要场景：从相册快速选图并裁剪/调节后保存；现场拍照→快速加文字/贴纸→保存或分享；多图拼接发布。

## 3. 范围
- MVP（必做）：
  - 相册选图：两个 Tab（全部/按文件夹）；异步方形缩略图；大图预览；单张选择进入编辑；无权限/空相册空态与指引。
  - 相机拍照：权限请求；无相机提示；拍后直接进入编辑。
  - 画布与手势：导入自适应；双指缩放 0.5–2x，平移。
  - 裁剪：自由裁剪 + 1:1/4:3/16:9/3:4/9:16，框可拖动/拉伸，预览无畸变。
  - 旋转/翻转：90°顺/逆、180°；水平/垂直翻转，实时预览。
  - 亮度/对比度：范围 -100~100、-50~150，默认 0，滑动实时生效，支持重置。
  - 文字：自定义输入多行；字体 ≥3、字号 12–36、颜色（RGB 或 ≥10 预设）、透明度 50–100%；拖拽/缩放/旋转 0–360°；可编辑/删除。
- 保存：写存储权限；失败提示（权限/空间不足）；保存成功提示并入相册；自动加水印“训练营”（默认右下留边距）。

## 4. 用户故事 / 验收要点（MVP）
- 作为用户，我能在相册“全部/文件夹”中看到方形缩略图，列表滑动流畅；无权限时给理由和去设置/重试入口；空相册有空态。
- 我点击缩略图可看大图预览，滑动切换，单张进入编辑。
- 我能拍照并直接进入编辑；无相机设备时得到提示并返回。
- 在编辑页，我能手势缩放/平移图片，缩放 0.5–2x。
- 我能自由或按比例裁剪，裁剪框可拖拽调整，预览无畸变。
- 我能旋转 90°/180°、水平/垂直翻转，立即看到效果。
- 我能调节亮度/对比度，滑动实时更新，随时重置。
- 我能添加文字并修改字体/字号/颜色/透明度，拖拽/缩放/旋转文字；可再次编辑或删除。
- 我能保存图片到相册，自动加“训练营”水印；权限不足或空间不足会提示；成功后有 Toast/通知。

## 5. 信息架构与导航
- 启动页 → 相册页（Tab：全部 / 文件夹；入口：相机）。
- 大图预览 → 编辑页。
- 编辑页：主画布居中；底部工具栏（裁剪、旋转/翻转、调节、文字、滤镜、贴纸、拼接、更多）；顶部：返回、撤销/重做、保存、分享（进阶）。

## 6. 交互与视觉要点
- 核心按钮显眼；点击有色变/轻震反馈；实时预览避免“盲操作”。
- 撤销/重做支持主要编辑操作。
- 夜间模式：背景降亮、控件对比降低，保持可读性。
- 适配：不同分辨率与横竖屏布局合理，无拉伸错位。

## 7. 性能与非功能
- 启动 ≤1s；相册滑动帧率 ≥30fps。
- 选图/拍照至编辑 ≤1s；滤镜/参数预览响应 ≤0.5s。
- 内存占用：编辑 10MB 内单图时 ≤200MB；避免泄漏。
- 稳定性：连续编辑 10 张无闪退。
- 兼容性：Android 10+，至少两款真机测试。

## 8. 权限与异常
- 存储/相机权限分场景请求，拒绝后给说明与再授权入口。
- 异常态：无权限、无图片、无相机、存储空间不足、保存失败、分享失败均有提示与下一步指引。

## 9. 数据埋点（可选）
- 启动耗时、相册加载耗时、功能使用频次（裁剪/滤镜/文字/贴纸/保存/分享）、保存成功率、异常分布。

## 10. 里程碑（示例）
- W1：相册/相机、权限、预览与手势。
- W2：裁剪/旋转/翻转/亮度对比度、文字、保存+水印。
- W3：滤镜/贴纸/拼接、动效、夜间模式、分享。
- W4：性能与稳定性优化、适配、埋点、文档与演示视频。

## 11. 风险与对策
- 权限被永久拒绝：提供去设置指引与空态。
- 大图内存占用：采用缩略图/采样加载，编辑时按需复用 Bitmap。
- 性能/帧率不足：异步加载、GPU 加速、减少过度绘制，必要时降级效果。
